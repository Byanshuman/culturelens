<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Company List â€“ Workplace Toxicity Index</title>

<style>

*{box-sizing:border-box;}

body{
  margin:0;
  font-family:Segoe UI, Arial;
  background:linear-gradient(140deg,#020617,#020b25,#0f172a);
  color:white;
}

nav{
  padding:18px 40px;
  font-size:22px;
  font-weight:700;
  border-bottom:1px solid rgba(255,255,255,.1);
  background:rgba(0,0,0,.5);
  backdrop-filter:blur(12px);
}

.wrapper{
  max-width:1100px;
  margin:auto;
  padding:20px;
}

/* card */
.card{
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  padding:18px;
  margin-top:16px;
  border-radius:18px;
  backdrop-filter:blur(14px);
  box-shadow:0 20px 40px rgba(0,0,0,.35);
}

/* inputs */
input{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.25);
  background:rgba(255,255,255,.08);
  color:white;
}

input::placeholder{color:#cbd5e1;}

button{
  padding:10px 18px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  font-weight:600;
}

.primary{
  background:#38bdf8;
  color:black;
}
.primary:hover{background:#0ea5e9;}

.company-item{
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  border-radius:14px;
  padding:12px;
  margin-top:8px;
}

.badge{
  background:#facc15;
  padding:4px 8px;
  border-radius:8px;
  color:black;
  font-weight:700;
}

.small{
  font-size:13px;
  color:#cbd5e1;
}

</style>
</head>

<body>

<nav>Company Directory</nav>

<div class="wrapper">

<!-- ADD COMPANY -->
<div class="card">
  <h2>Add Company</h2>

  <input id="companyInput" placeholder="Enter company name">

  <br><br>

  <button class="primary" onclick="addCompany()">Add Company</button>

  <p id="msg" style="color:#a7f3d0;"></p>
  <p id="err" style="color:#fca5a5;"></p>
</div>

<!-- SEARCH -->
<div class="card">
  <h2>Top Companies</h2>

  <input placeholder="Search company..." onkeyup="render(this.value)">

  <div id="companyList"></div>

  <br>
  <span class="small">Toxicity score will be calculated from reviews later.</span>
</div>

</div>

<script>

// Load saved companies
let companies = JSON.parse(localStorage.getItem("companies") || "[]");

/* ADD COMPANY */
function addCompany(){

  let name = companyInput.value.trim();
  msg.innerText="";
  err.innerText="";

  if(name===""){
    err.innerText="Enter a company name first.";
    return;
  }

  // avoid duplicates
  if(companies.includes(name.toLowerCase())){
    err.innerText="Company already exists.";
    return;
  }

  companies.push(name.toLowerCase()); // store lowercase
  localStorage.setItem("companies", JSON.stringify(companies));

  msg.innerText="Company added successfully.";
  companyInput.value="";

  render("");
}

/* DISPLAY LIST */
function render(search){

  let div = document.getElementById("companyList");
  div.innerHTML="";

  companies
    .filter(c => c.includes(search.toLowerCase()))
    .sort()
    .forEach((c,i)=>{

      div.innerHTML += `
        <div class="company-item">
          <b>${i+1}. ${capitalize(c)}</b>
          <span class="badge">Score pending</span>
        </div>
      `;
    });
}

/* CAPITALIZE TEXT */
function capitalize(str){
  return str.replace(/\b\w/g, ch => ch.toUpperCase());
}

render("");

</script>

</body>
</html>
